cmake_minimum_required(VERSION 2.8.3)
project(fuzzy_logic_controller)

find_package(catkin REQUIRED COMPONENTS roscpp roslib std_msgs sensor_msgs geometry_msgs tf dynamic_reconfigure)
find_package(gazebo REQUIRED)
find_package(cmake_modules REQUIRED)
find_package(Eigen REQUIRED)

generate_dynamic_reconfigure_options(cfg/setController.cfg)

catkin_package(INCLUDE_DIRS ${catkin_INCLUDE_DIRS})

install(PROGRAMS cfg/setController DESTINATION ${CATKIN_PACKAGE_BIN_DESTINATION})

include_directories(include ${catkin_INCLUDE_DIRS} ${GAZEBO_INCLUDE_DIRS} ${Eigen_INCLUDE_DIRS})

add_library(fuzzylite src/fuzzylite.cpp)
add_library(Console src/Console.cpp)
add_library(Engine src/Engine.cpp)
add_library(Exception src/Exception.cpp)

add_library(Bisector src/defuzzifier/Bisector.cpp)
add_library(Centroid src/defuzzifier/Centroid.cpp)
add_library(IntegralDefuzzifier src/defuzzifier/IntegralDefuzzifier.cpp)
add_library(SmallestOfMaximum src/defuzzifier/SmallestOfMaximum.cpp)
add_library(LargestOfMaximum src/defuzzifier/LargestOfMaximum.cpp)
add_library(MeanOfMaximum src/defuzzifier/MeanOfMaximum.cpp)
add_library(WeightedAverage src/defuzzifier/WeightedAverage.cpp)
add_library(WeightedDefuzzifier src/defuzzifier/WeightedDefuzzifier.cpp)
add_library(WeightedSum src/defuzzifier/WeightedSum.cpp)

add_library(CloningFactory src/factory/CloningFactory.cpp)
add_library(ConstructionFactory src/factory/ConstructionFactory.cpp)
add_library(FactoryManager src/factory/FactoryManager.cpp)
add_library(FunctionFactory src/factory/FunctionFactory.cpp)
add_library(DefuzzifierFactory src/factory/DefuzzifierFactory.cpp)
add_library(HedgeFactory src/factory/HedgeFactory.cpp)
add_library(SNormFactory src/factory/SNormFactory.cpp)
add_library(TNormFactory src/factory/TNormFactory.cpp)
add_library(TermFactory src/factory/TermFactory.cpp)

add_library(Exporter src/imex/Exporter.cpp)
add_library(Importer src/imex/Importer.cpp)
add_library(CppExporter src/imex/CppExporter.cpp)
add_library(FclImporter src/imex/FclImporter.cpp)
add_library(FclExporter src/imex/FclExporter.cpp)
add_library(FisImporter src/imex/FisImporter.cpp)
add_library(FisExporter src/imex/FisExporter.cpp)
add_library(FldExporter src/imex/FldExporter.cpp)
add_library(FllImporter src/imex/FllImporter.cpp)
add_library(FllExporter src/imex/FllExporter.cpp)
add_library(JavaExporter src/imex/JavaExporter.cpp)

add_library(Any src/hedge/Any.cpp)
add_library(Extremely src/hedge/Extremely.cpp)
add_library(Not src/hedge/Not.cpp)
add_library(Seldom src/hedge/Seldom.cpp)
add_library(Somewhat src/hedge/Somewhat.cpp)
add_library(Very src/hedge/Very.cpp)

add_library(Operation src/Operation.cpp)

add_library(AlgebraicSum src/norm/s/AlgebraicSum.cpp)
add_library(BoundedSum src/norm/s/BoundedSum.cpp)
add_library(DrasticSum src/norm/s/DrasticSum.cpp)
add_library(EinsteinSum src/norm/s/EinsteinSum.cpp)
add_library(HamacherSum src/norm/s/HamacherSum.cpp)
add_library(Maximum src/norm/s/Maximum.cpp)
add_library(NilpotentMaximum src/norm/s/NilpotentMaximum.cpp)
add_library(NormalizedSum src/norm/s/NormalizedSum.cpp)

add_library(AlgebraicProduct src/norm/t/AlgebraicProduct.cpp)
add_library(BoundedDifference src/norm/t/BoundedDifference.cpp)
add_library(DrasticProduct src/norm/t/DrasticProduct.cpp)
add_library(EinsteinProduct src/norm/t/EinsteinProduct.cpp)
add_library(HamacherProduct src/norm/t/HamacherProduct.cpp)
add_library(Minimum src/norm/t/Minimum.cpp)
add_library(NilpotentMinimum src/norm/t/NilpotentMinimum.cpp)

add_library(Antecedent src/rule/Antecedent.cpp)
add_library(Consequent src/rule/Consequent.cpp)
add_library(Rule src/rule/Rule.cpp)
add_library(RuleBlock src/rule/RuleBlock.cpp)
add_library(Expression src/rule/Expression.cpp)

add_library(Accumulated src/term/Accumulated.cpp)
add_library(Bell src/term/Bell.cpp)
add_library(Concave src/term/Concave.cpp)
add_library(Constant src/term/Constant.cpp)
add_library(Cosine src/term/Cosine.cpp)
add_library(Discrete src/term/Discrete.cpp)
add_library(Function src/term/Function.cpp)
add_library(Gaussian src/term/Gaussian.cpp)
add_library(GaussianProduct src/term/GaussianProduct.cpp)
add_library(Linear src/term/Linear.cpp)
add_library(PiShape src/term/PiShape.cpp)
add_library(Ramp src/term/Ramp.cpp)
add_library(Rectangle src/term/Rectangle.cpp)
add_library(SShape src/term/SShape.cpp)
add_library(Sigmoid src/term/Sigmoid.cpp)
add_library(SigmoidDifference src/term/SigmoidDifference.cpp)
add_library(SigmoidProduct src/term/SigmoidProduct.cpp)
add_library(Spike src/term/Spike.cpp)
add_library(Term src/term/Term.cpp)
add_library(Activated src/term/Activated.cpp)
add_library(Trapezoid src/term/Trapezoid.cpp)
add_library(Triangle src/term/Triangle.cpp)
add_library(ZShape src/term/ZShape.cpp)

add_library(InputVariable src/variable/InputVariable.cpp)
add_library(OutputVariable src/variable/OutputVariable.cpp)
add_library(Variable src/variable/Variable.cpp)

target_link_libraries(Antecedent Expression)
target_link_libraries(Rule Consequent Antecedent)
target_link_libraries(DefuzzifierFactory SmallestOfMaximum MeanOfMaximum WeightedSum LargestOfMaximum Bisector WeightedAverage)
target_link_libraries(SNormFactory NilpotentMaximum HamacherSum BoundedSum DrasticSum EinsteinSum NormalizedSum Maximum AlgebraicSum)
target_link_libraries(TermFactory Trapezoid Triangle GaussianProduct Rectangle Discrete Gaussian Spike PiShape Bell SigmoidProduct SigmoidDifference Cosine Function)
target_link_libraries(HedgeFactory Any Seldom Very Somewhat Not Extremely)
target_link_libraries(TNormFactory HamacherProduct DrasticProduct Minimum NilpotentMinimum BoundedDifference EinsteinProduct)
target_link_libraries(FunctionFactory CloningFactory Function)
target_link_libraries(Accumulated Activated)
target_link_libraries(FactoryManager ConstructionFactory FunctionFactory TNormFactory HedgeFactory TermFactory SNormFactory DefuzzifierFactory)
target_link_libraries(WeightedDefuzzifier ZShape Ramp Concave SShape Sigmoid)
target_link_libraries(FllExporter Exporter)
target_link_libraries(Variable Linear Constant Centroid)
target_link_libraries(OutputVariable Accumulated)
target_link_libraries(Engine OutputVariable Exception AlgebraicProduct fuzzylite Variable Operation FllExporter RuleBlock Term InputVariable WeightedDefuzzifier IntegralDefuzzifier FactoryManager)
target_link_libraries(FclImporter Importer)
target_link_libraries(Console Function FldExporter Operation JavaExporter InputVariable Rule IntegralDefuzzifier Operation FclImporter CppExporter Engine RuleBlock FisExporter FllExporter FclExporter FisImporter FllImporter OutputVariable Constant Triangle)

add_library(FuzzyLogicController src/controllers/FuzzyLogicController.cpp)
add_library(SingletonFuzzyLogicController src/controllers/SingletonFuzzyLogicController.cpp)
add_library(StandardNonSingletonFuzzyLogicController src/controllers/StandardNonSingletonFuzzyLogicController.cpp)
add_library(CentroidNonSingletonFuzzyLogicController src/controllers/CentroidNonSingletonFuzzyLogicController.cpp)
target_link_libraries(FuzzyLogicController Engine Rule)
target_link_libraries(SingletonFuzzyLogicController Engine Rule)
target_link_libraries(StandardNonSingletonFuzzyLogicController Engine Rule)
target_link_libraries(CentroidNonSingletonFuzzyLogicController Engine Rule)

add_executable(velocity_controller src/VelocityController.cpp)
target_link_libraries(velocity_controller FuzzyLogicController ${catkin_LIBRARIES})
add_dependencies(velocity_controller ${PROJECT_NAME}_generate_messages_cpp ${PROJECT_NAME}_gencfg)
